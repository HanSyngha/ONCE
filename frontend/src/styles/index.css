@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Custom Properties for theming */
:root {
  --toast-bg: #ffffff;
  --toast-color: #0f172a;

  /* Semantic surface */
  --surface-primary: #ffffff;
  --surface-secondary: #f8fafc;
  --surface-tertiary: #f1f5f9;

  /* Semantic content/text */
  --content-primary: #0f172a;
  --content-secondary: #475569;
  --content-tertiary: #94a3b8;
  --content-quaternary: #cbd5e1;

  /* Semantic borders */
  --border-primary: #e2e8f0;
  --border-secondary: #cbd5e1;

  /* Scrollbar */
  --scrollbar-track: #f1f5f9;
  --scrollbar-thumb: #cbd5e1;
  --scrollbar-thumb-hover: #94a3b8;
}

.dark {
  --toast-bg: #1e293b;
  --toast-color: #f8fafc;

  /* Semantic surface (dark) */
  --surface-primary: #0f172a;
  --surface-secondary: #1e293b;
  --surface-tertiary: #334155;

  /* Semantic content/text (dark) */
  --content-primary: #f8fafc;
  --content-secondary: #cbd5e1;
  --content-tertiary: #64748b;
  --content-quaternary: #475569;

  /* Semantic borders (dark) */
  --border-primary: #334155;
  --border-secondary: #475569;

  /* Scrollbar */
  --scrollbar-track: #1e293b;
  --scrollbar-thumb: #475569;
  --scrollbar-thumb-hover: #64748b;
}

/* Base styles */
@layer base {
  * {
    @apply border-border-primary;
  }

  html {
    @apply antialiased;
    font-feature-settings: "ss01", "ss02", "cv01";
  }

  body {
    @apply bg-surface-primary text-content-primary;
    @apply transition-colors duration-200;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
  }

  /* Selection */
  ::selection {
    @apply bg-primary-500/20 text-primary-900 dark:text-primary-100;
  }

  /* Focus visible */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-surface-primary;
  }
}

/* Component styles */
@layer components {
  /* Card styles */
  .card {
    @apply bg-surface-primary rounded-2xl border border-border-primary;
    @apply shadow-soft hover:shadow-soft-lg transition-shadow duration-200;
  }

  .card-interactive {
    @apply card cursor-pointer;
    @apply hover:border-primary-200 dark:hover:border-primary-700;
    @apply active:scale-[0.99] transition-all duration-150;
  }

  /* Button base styles */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-medium rounded-xl;
    @apply transition-all duration-150 ease-out;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    @apply disabled:opacity-50 disabled:pointer-events-none;
    @apply active:scale-[0.98];
  }

  .btn-sm {
    @apply btn px-3 py-1.5 text-sm;
  }

  .btn-md {
    @apply btn px-4 py-2 text-sm;
  }

  .btn-lg {
    @apply btn px-6 py-3 text-base;
  }

  .btn-primary {
    @apply btn px-4 py-2 text-sm;
    @apply bg-primary-600 text-white hover:bg-primary-700;
    @apply focus-visible:ring-primary-500;
    @apply shadow-sm hover:shadow-md;
  }

  .btn-secondary {
    @apply btn px-4 py-2 text-sm;
    @apply bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200;
    @apply hover:bg-slate-200 dark:hover:bg-slate-600;
    @apply focus-visible:ring-slate-400;
  }

  .btn-ghost {
    @apply btn px-4 py-2 text-sm;
    @apply bg-transparent text-slate-600 dark:text-slate-300;
    @apply hover:bg-slate-100 dark:hover:bg-slate-700;
    @apply focus-visible:ring-slate-400;
  }

  .btn-danger {
    @apply btn px-4 py-2 text-sm;
    @apply bg-red-600 text-white hover:bg-red-700;
    @apply focus-visible:ring-red-500;
  }

  /* Input styles */
  .input {
    @apply w-full px-4 py-2.5 rounded-xl border border-border-primary;
    @apply bg-surface-primary text-content-primary;
    @apply placeholder:text-content-tertiary;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
    @apply transition-all duration-150;
  }

  .input-lg {
    @apply input px-5 py-3 text-lg;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply badge bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300;
  }

  .badge-success {
    @apply badge bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300;
  }

  .badge-warning {
    @apply badge bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300;
  }

  .badge-danger {
    @apply badge bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300;
  }

  /* Skeleton loading */
  .skeleton {
    @apply bg-slate-200 dark:bg-slate-700 rounded animate-pulse;
  }

  .skeleton-text {
    @apply skeleton h-4 w-full;
  }

  .skeleton-title {
    @apply skeleton h-6 w-3/4;
  }

  .skeleton-circle {
    @apply skeleton rounded-full;
  }

  /* Glass effect */
  .glass {
    @apply bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl;
    @apply border border-white/20 dark:border-slate-700/50;
  }

  /* Gradient backgrounds */
  .gradient-primary {
    @apply bg-gradient-to-br from-primary-500 to-primary-700;
  }

  .gradient-mesh {
    background-image:
      radial-gradient(at 40% 20%, hsla(217, 91%, 60%, 0.2) 0px, transparent 50%),
      radial-gradient(at 80% 0%, hsla(217, 91%, 75%, 0.15) 0px, transparent 50%),
      radial-gradient(at 0% 50%, hsla(217, 91%, 60%, 0.1) 0px, transparent 50%),
      radial-gradient(at 80% 50%, hsla(217, 91%, 75%, 0.1) 0px, transparent 50%),
      radial-gradient(at 0% 100%, hsla(217, 91%, 60%, 0.15) 0px, transparent 50%);
  }
}

/* Utilities */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Animation utilities */
  .animate-in {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .slide-in-bottom {
    animation: slideUp 0.3s ease-out forwards;
  }

  .slide-in-top {
    animation: slideDown 0.3s ease-out forwards;
  }

  /* Truncate multiple lines */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* BlockNote editor overrides */
.bn-container {
  @apply font-sans;
}

.bn-editor {
  @apply !bg-transparent;
}

.bn-block-group .bn-block-content {
  @apply !py-1;
}

/* Modal backdrop */
.modal-backdrop {
  @apply fixed inset-0 bg-black/50 backdrop-blur-sm;
  @apply animate-fade-in;
}

/* Floating action button */
.fab {
  @apply fixed bottom-6 right-6 z-50;
  @apply w-14 h-14 rounded-full shadow-soft-xl;
  @apply bg-primary-600 text-white;
  @apply flex items-center justify-center;
  @apply hover:bg-primary-700 hover:shadow-glow;
  @apply active:scale-95 transition-all duration-150;
}

/* Tooltip */
[data-tooltip] {
  @apply relative;
}

[data-tooltip]::after {
  content: attr(data-tooltip);
  @apply absolute bottom-full left-1/2 -translate-x-1/2 mb-2;
  @apply px-2 py-1 text-xs text-white bg-slate-900 dark:bg-slate-700 rounded-lg;
  @apply opacity-0 pointer-events-none transition-opacity duration-150;
  @apply whitespace-nowrap;
}

[data-tooltip]:hover::after {
  @apply opacity-100;
}
